<!DOCTYPE html>
<html lang = "de">
  <head>
    <title>Dozentenampel</title>
	  <!-- Global site tag (gtag.js) - Google Analytics -->
	  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HGQ6XDT6P1"></script>
	  <script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		  
		  gtag('config', 'G-HGQ6XDT6P1');
	  </script>
	  <style>
		  table, th, td {
  			border: thin solid black;
  			border-collapse: collapse;
		  }
		  .dot {
			  height: 25px;
			  width: 25px;
			  background-color: grey;
			  border-radius: 50%;
			  display: inline-block;
		 }
		  .hide {
    max-height: 0 !important;
}
.dropdown{
  	color: black;
	border: 0.1em solid black;
	width: 10em;
	margin-bottom: 1em;
}

.dropdown .title{
	margin: .3em .3em .3em .3em;	
	width: 100%;
}

.dropdown .title .fa-angle-right{
	float: right;
	margin-right: .7em;
	transition: transform .3s;
}

.dropdown .menu{
  	color: white;
	transition: max-height .5s ease-out;
	max-height: 20em;
	overflow: hidden;
}

.dropdown .menu .option{
	margin: .3em .3em .3em .3em;
	margin-top: 0.3em;
}

.dropdown .menu .option:hover{
	background: rgba(0,0,0.2);
}

.pointerCursor:hover{
	cursor: pointer;
}

.rotate-90{
	transform: rotate(90deg);
}
	 </style>
 <link rel="stylesheet" href="styles.css">
  </head>
  <body>
	  <table>
		  <tr>
			  <th> Dozent </th>
			  <th> Anwesenheit </th>
			  <th> voraussichtliche Wiedererreichbarkeit </th>
			  <th> Raum </th>
			  <th> Telefonnummer </th>
			  <th> E-Mail Adresse </th>
			  <th> Allgemeine Sprechzeiten </th>
		  <tr>
			  <td> 
				  Albrecht-Goepfert, Evelyn				  
			  </td>
			  <td>
				  <div class='dropdown'>
		<div class='title pointerCursor'>Select an option <i class="fa fa-angle-right"></i></div>
		
		<div class='menu pointerCursor hide'>
			<div class='option' style="background-color: green" id='option1'>Anwesend</div>
			<div class='option' style="background-color: yellow" id='option2'>Beschäftigt</div>
			<div class='option' style="background-color: red" id='option3'>Abwesend</div>
		</div>

	</div>
			  </td>
			   <td> 
				  01.12.2021				  
			  </td>
			  <td> 
				  H 225				  
			  </td>
			  <td> 
				  02331 - 9330 (703)				  
			  </td>
			  <td> 
				  albrecht.evelyn@fh-swf.de			  
			  </td>
			  <td> 
				  -			  
			  </td>
		  </tr>
		  <tr>
			  <td> 
				  Boecker, Stefan				  
			  </td>
			  <td>
				  <div class='dropdown'>
		<div class='title pointerCursor'>Select an option <i class="fa fa-angle-right"></i></div>
		
		<div class='menu pointerCursor hide'>
			<div class='option' style="background-color: green" id='option1'>Anwesend</div>
			<div class='option' style="background-color: yellow" id='option2'>Beschäftigt</div>
			<div class='option' style="background-color: red" id='option3'>Abwesend</div>
		</div>

	</div>
			  </td>
			   <td> 
				  -				  
			  </td>
			  <td> 
				  H 03				  
			  </td>
			  <td> 
				  02331 - 9330 (700)				  
			  </td>
			  <td> 
				  boecker.stefan@fh-swf.de				  
			  </td>
			  <td> 
				  Donnerstags 10 - 11 Uhr			  
			  </td>
		  </tr>
		  <tr>
			  <td> 
				  Femmer, Henning			  	
			  </td>
			  <td>
				<div class='dropdown'>
		<div class='title pointerCursor'>Select an option <i class="fa fa-angle-right"></i></div>
		
		<div class='menu pointerCursor hide'>
			<div class='option' style="background-color: green" id='option1'>Anwesend</div>
			<div class='option' style="background-color: yellow" id='option2'>Beschäftigt</div>
			<div class='option' style="background-color: red" id='option3'>Abwesend</div>
		</div>

	</div> 
			  </td>
			   <td> 
				  -				  
			  </td>
			  <td> 
				  H 121				  
			  </td>
			  <td> 
				  02331 - 9330 (6293)				  
			  </td>
			  <td> 
				  femmer.henning@fh-swf.de				  
			  </td>
			  <td> 
				  -			  
			  </td>
		  </tr>
	  </table>
	  <!-- Idee: Rote und grüne Leuchten in der ersten Spalte/ alternativ Felder farbig passend zum Status hinterlegen -->
	  <!-- Punkte können mit dots eingefügt werden https://www.w3schools.com/howto/howto_css_circles.asp -->
	  <!-- Hintergrundfarbe kann man mit background-color ändern. Hierzu müsste man eine Variable einfügen, die dann die entsprechende Farbe auslöst-->
	<script>
	  function toggleClass(elem,className){
  if (elem.className.indexOf(className) !== -1){
    elem.className = elem.className.replace(className,'');
  }
  else{
    elem.className = elem.className.replace(/\s+/g,' ') + 	' ' + className;
  }

  return elem;
}

function toggleDisplay(elem){
  const curDisplayStyle = elem.style.display;			

  if (curDisplayStyle === 'none' || curDisplayStyle === ''){
    elem.style.display = 'block';
  }
  else{
    elem.style.display = 'none';
  }

}

function toggleMenuDisplay(e){
  const dropdown = e.currentTarget.parentNode;
  const menu = dropdown.querySelector('.menu');
  const icon = dropdown.querySelector('.fa-angle-right');

  toggleClass(menu,'hide');
  toggleClass(icon,'rotate-90');
}

function handleOptionSelected(e){
  toggleClass(e.target.parentNode, 'hide');			

  const id = e.target.id;
  const newValue = e.target.textContent + ' ';
  const titleElem = document.querySelector('.dropdown .title');
  const icon = document.querySelector('.dropdown .title .fa');


  titleElem.textContent = newValue;
  titleElem.appendChild(icon);

  //trigger custom event
  document.querySelector('.dropdown .title').dispatchEvent(new Event('change'));
    //setTimeout is used so transition is properly shown
  setTimeout(() => toggleClass(icon,'rotate-90',0));
}

function handleTitleChange(e){
  const result = document.getElementById('result');

  result.innerHTML = 'The result is: ' + e.target.textContent;
}

//get elements
const dropdownTitle = document.querySelector('.dropdown .title');
const dropdownOptions = document.querySelectorAll('.dropdown .option');

//bind listeners to these elements
dropdownTitle.addEventListener('click', toggleMenuDisplay);

dropdownOptions.forEach(option => option.addEventListener('click',handleOptionSelected));

document.querySelector('.dropdown .title').addEventListener('change',handleTitleChange);
	</script>  
	</body>
</html>
